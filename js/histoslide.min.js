(function(e){"use strict";var t={stateId:0,data:{},isListening:!0,scrollSpeed:1e3,maxDuration:1e3,scrollTop:function(){return Math.max($("body").scrollTop(),$("html").scrollTop())},slideTo:function(e,n){var r=e.closest("section").attr("id");e.addClass("slide-left").parent().addClass("slide").find("."+n).removeClass("slide-right").addClass("active");t.runCharts(e.closest(".container").find("."+n+" .chart"));t.pushState(r,n);setTimeout(function(){$('[data-spy="scroll"]').each(function(){var e=$(this).scrollspy("refresh")})},1100)},slideBack:function(e){var n=e.closest("section").attr("id");e.addClass("slide-right").removeClass("active").parent().removeClass("slide").find(".slide-left").removeClass("slide-left");t.pushState(n);setTimeout(function(){$('[data-spy="scroll"]').each(function(){var e=$(this).scrollspy("refresh")})},1100)},scrollPage:function(e,n,r){var i=$("#navbar").height(),s=e.offset().top-i,o=Math.abs(s-t.scrollTop()),n;n=typeof n=="undefined"?Math.min(o/t.scrollSpeed*1e3,t.maxDuration):n;r=typeof r=="undefined"?0:r;t.isListening=!1;setTimeout(function(){$("html,body").animate({scrollTop:e.offset().top-i},n,"easeInOutCubic")},r);setTimeout(function(){t.isListening=!0;t.pushState(e.attr("id").replace("#",""))},r+n);return r+n},runCharts:function(e){e.each(function(e,t){var n=$(t),r={segmentShowStroke:!1,percentageInnerCutout:90},i=[{value:parseInt(n.attr("data-value"),10),color:"#1C3A36"},{value:100-parseInt(n.attr("data-value"),10),color:"#eeeeee"}],s=n.find("canvas"),o=s.get(0).getContext("2d");o.clearRect(0,0,s.width(),s.height());setTimeout(function(){(new Chart(o)).Doughnut(i,r)},1500)})},pushState:function(n,r){var i=["row","active","slide-right"],s=$("#"+n),o=s.find(".active"),u=!1,a,f,l;if(t.isListening){if(typeof r=="undefined"){if(o.length){l=o.attr("class").split(/\s+/);$.each(l,function(e,t){if($.inArray(t.trim(),i)===-1){r=t;u=!0}})}}else u=!0;if(u){a=r;f="/"+n+"/"+r}else{a=n;f="/"+(n==="top"?"":n)}if(typeof n!="undefined")if(e.history.state===null||e.history.state.hasOwnProperty("url")&&e.history.state.url!==f){history.pushState({url:f},a,f);t.updateSEO()}}},updateSEO:function(){var e="/api/"+location.pathname;$.ajax({url:e,dataType:"JSON",success:function(e){document.title=e.title;$("meta[name=description],meta[name=keywords]").remove();$("head").append('<meta name="description" content="'+e.description+'">'+'<meta name="keywords" content="'+e.keywords+'">')}})},init:function(){e.onpopstate=function(e){var n=location.pathname.split("/"),r=n[1],i=n.length>2?n[2]:"",s=$("#"+r),o=s.find(".active"),u,a;if(s.length){a=t.scrollPage(s);if(i!==""){u=$(s.find("article."+i));u.length&&setTimeout(function(){t.slideTo($(s).find("article.slider-nav"),i);t.pushState(r,i)},a)}else o.length&&t.slideBack(o)}else t.scrollPage($("#top"))}}};typeof e.PortfolioJS=="undefined"&&(e.PortfolioJS={});e.PortfolioJS.histoslide=t;e.PortfolioJS.histoslide.init()})(this.window||this);